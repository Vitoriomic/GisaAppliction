<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciar Ocorrências</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <h1>Gerenciar Ocorrências</h1>
</header>
<div id="main-content-wrapper">
    <main>
        <!-- Filtros -->
        <div class="filtros">
            <select id="filtro-obra">
                <option value="">Todos os Locais</option>
            </select>
            <select id="filtro-grupo">
                <option value="">Todos os Grupos</option>
            </select>
            <select id="filtro-status">
                <option value="">Todos os Status</option>
            </select>
            <input type="date" id="filtro-data" placeholder="Selecione uma data" />
            <input type="text" id="filtro-id" placeholder="Pesquisar ID" />
            <button id="btn-filtrar" onclick="carregarOcorrencias()">Filtrar</button>
            <span id="loading-spinner" style="display: none; margin-left: 8px;">
                <div class="spinner"></div>
            </span>
        </div>

        <!-- Lista de Ocorrências -->
        <section class="ocorrencias">
            <h2>Resultados <span id="total-ocorrencias" style="font-size: 0.8em; color: gray;"></span></h2>
            <div class="cards" id="cards-container">
                <!-- Os registros aparecerão aqui -->
            </div>
        </section>
    </main>
</div>

<div class="add-button" onclick="abrirModalAdicionar()">
    <span class="tooltip">Adicionar Ocorrência</span>
    <i class="icon-plus"></i>
</div>

<!-- Modal para detalhes -->
<div id="modal-ocorrencia" class="modal" style="display: none;">
    <div class="modal-content">
        <button id="editar-ocorrencia" onclick="abrirModalEditar()">Editar</button>
        <button onclick="excluirOcorrencia(ocorrenciaAtual.ocorrenciaId)">Excluir</button>
        <button class="close-button" onclick="fecharModal()">&times;</button>
        <h2>Detalhes da Ocorrência</h2>
        <p><strong>ID:</strong> <span id="modal-ocorrencia-id"></span></p>
        <p><strong>Local:</strong> <span id="modal-ocorrencia-local"></span></p>
        <p><strong>Grupo:</strong> <span id="modal-ocorrencia-grupo"></span></p>
        <p><strong>Data:</strong> <span id="modal-ocorrencia-data"></span></p>
        <p><strong>Status:</strong> <span id="modal-ocorrencia-status"></span></p>
        <p><strong>Descrição:</strong> <span id="modal-ocorrencia-descricao"></span></p>
        <p><strong>Detalhamento:</strong> <span id="modal-ocorrencia-detalhamento"></span></p>
    </div>
</div>

<!-- Modal para adicionar nova ocorrência -->
<div id="modal-adicionar" class="modal" style="display: none;">
    <div class="modal-content">
        <button class="close-button" onclick="fecharModalAdicionar()">&times;</button>
        <h2 id="modal-title">Adicionar Ocorrência</h2>
        <form id="form-adicionar">
            <!-- Local -->
            <div class="form-group">
                <label for="local-adicionar">Local:</label>
                <select id="local-adicionar" required>
                    <option value="">Selecione um local</option>
                </select>
            </div>
            <!-- Grupo -->
            <div class="form-group">
                <label for="grupo-adicionar">Grupo:</label>
                <select id="grupo-adicionar" required>
                    <option value="">Selecione um grupo</option>
                </select>
            </div>
            <!-- Descrição -->
            <div class="form-group">
                <label for="descricao-adicionar">Descrição:</label>
                <textarea id="descricao-adicionar" placeholder="Descrição da ocorrência" required></textarea>
            </div>
            <!-- Status -->
            <div class="form-group">
                <label for="status-adicionar">Status:</label>
                <select id="status-adicionar" required>
                    <option value="">Selecione um status</option>
                </select>
            </div>
            <!-- Data -->
            <div class="form-group">
                <label for="data-adicionar">Data:</label>
                <input type="date" id="data-adicionar" required>
            </div>
            <!-- Botão -->
            <div class="form-actions">
                <button type="button" class="btn" id="modal-action-button" onclick="adicionarOcorrencia()">Adicionar</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal para editar ocorrência -->
<div id="modal-editar" class="modal" style="display: none;">
    <div class="modal-content">
        <button class="close-button" onclick="fecharModalEditar()">&times;</button>
        <h2>Editar Ocorrência</h2>
        <form id="form-editar">
            <!-- Local -->
            <div class="form-group">
                <label for="local-editar">Local:</label>
                <select id="local-editar"></select>
            </div>
            <!-- Grupo -->
            <div class="form-group">
                <label for="grupo-editar">Grupo:</label>
                <select id="grupo-editar"></select>
            </div>
            <!-- Descrição -->
            <div class="form-group">
                <label for="descricao-editar">Descrição:</label>
                <textarea id="descricao-editar"></textarea>
            </div>
            <!-- Status -->
            <div class="form-group">
                <label for="status-editar">Status:</label>
                <select id="status-editar"></select>
            </div>
            <!-- Data -->
            <div class="form-group">
                <label for="data-editar">Data:</label>
                <input type="date" id="data-editar">
            </div>
            <!-- Botão -->
            <div class="form-actions">
                <button type="button" onclick="salvarOcorrencia()">Salvar</button>
            </div>
        </form>
    </div>
</div>

<script src="scriptOcorrencias.js"></script>
</body>
</html>
